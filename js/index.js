var _0x4265f4=_0x5a70;(function(_0x43ac38,_0x470e30){var _0x33b15d=_0x5a70,_0x331247=_0x43ac38();while(!![]){try{var _0x46e11f=parseInt(_0x33b15d(0x1ff))/0x1+-parseInt(_0x33b15d(0x225))/0x2+-parseInt(_0x33b15d(0x226))/0x3+-parseInt(_0x33b15d(0x206))/0x4*(-parseInt(_0x33b15d(0x1ee))/0x5)+parseInt(_0x33b15d(0x1f2))/0x6+-parseInt(_0x33b15d(0x20c))/0x7+parseInt(_0x33b15d(0x22d))/0x8*(-parseInt(_0x33b15d(0x211))/0x9);if(_0x46e11f===_0x470e30)break;else _0x331247['push'](_0x331247['shift']());}catch(_0x463c8d){_0x331247['push'](_0x331247['shift']());}}}(_0x13bf,0x29090));var i=0x0,stxtEmpID='',stxtEmpName='',stxtEmpPhone='',stxtEmpGroup='',dbProfile='',CheckFoundData=0x0,EidProfile='',dateString='',sDateRegister='',sCheckRedeemPoint=0x0,sCheckTNIapprove=0x0,sCheckLevel=0x0,sCodeName='TNIRedeemPoint';const x=document[_0x4265f4(0x1e5)](_0x4265f4(0x1f5)+i+'\x22]');$(document)['ready'](function(){main();});async function main(){var _0x627313=_0x4265f4;await liff[_0x627313(0x223)]({'liffId':_0x627313(0x21d)}),document[_0x627313(0x205)]('isLoggedIn')[_0x627313(0x228)](liff[_0x627313(0x22a)]()),liff['isLoggedIn']()?getUserProfile():liff['login']();}async function getUserProfile(){var _0x57d92e=_0x4265f4,_0x1a5b36='';const _0x1307c6=await liff[_0x57d92e(0x22f)]();sessionStorage[_0x57d92e(0x237)]('LineID',_0x1307c6[_0x57d92e(0x1e7)]),sessionStorage['setItem'](_0x57d92e(0x1f3),_0x1307c6['displayName']),sessionStorage['setItem']('LinePicture',_0x1307c6[_0x57d92e(0x23d)]),_0x1a5b36+=_0x57d92e(0x224)+sessionStorage['getItem'](_0x57d92e(0x1fa))+_0x57d92e(0x1fb),_0x1a5b36+='<div\x20class=\x22NameLine\x22>'+sessionStorage[_0x57d92e(0x213)](_0x57d92e(0x1f3))+_0x57d92e(0x1f7),$('#MyProfile')[_0x57d92e(0x1eb)](_0x1a5b36),Connect_DB(),CheckTNIdate(),CheckData();}function openWindow(){var _0x5e67ee=_0x4265f4;liff['openWindow']({'url':_0x5e67ee(0x210),'external':!![]});}function Connect_DB(){var _0x1653c9=_0x4265f4,_0x341909={'apiKey':_0x1653c9(0x232),'authDomain':_0x1653c9(0x201),'projectId':_0x1653c9(0x1fc),'storageBucket':_0x1653c9(0x215),'messagingSenderId':_0x1653c9(0x20a),'appId':_0x1653c9(0x22e),'measurementId':_0x1653c9(0x239)};firebase['initializeApp'](_0x341909),dbProfile=firebase[_0x1653c9(0x1f4)]()[_0x1653c9(0x219)](_0x1653c9(0x1e3)),dbTNIdate=firebase[_0x1653c9(0x1f4)]()[_0x1653c9(0x219)](_0x1653c9(0x218)),dbTNIapprove=firebase['firestore']()['collection'](_0x1653c9(0x21f)),dbTNIRedeemPoint=firebase['firestore']()[_0x1653c9(0x219)](_0x1653c9(0x23c));}function CheckTNIdate(){var _0x44ac6a=_0x4265f4;dbTNIdate[_0x44ac6a(0x216)]('CodeName','==',sCodeName)[_0x44ac6a(0x20e)](0x1)[_0x44ac6a(0x230)]()[_0x44ac6a(0x1ef)](_0x3f3e93=>{_0x3f3e93['forEach'](_0x1404a5=>{var _0x503a1c=_0x5a70;sessionStorage[_0x503a1c(0x237)](_0x503a1c(0x218),_0x1404a5[_0x503a1c(0x21b)]()[_0x503a1c(0x236)]),$(_0x503a1c(0x1e4))['html'](_0x1404a5['data']()['DateUpload']);});});}function CheckData(){var _0x4c2e45=_0x4265f4;dbProfile['where'](_0x4c2e45(0x23a),'==',sessionStorage[_0x4c2e45(0x213)](_0x4c2e45(0x202)))[_0x4c2e45(0x230)]()[_0x4c2e45(0x1ef)](_0x1bcc96=>{var _0x3f3913=_0x4c2e45;_0x1bcc96[_0x3f3913(0x21a)](_0x1af1a6=>{var _0x1d4fdc=_0x3f3913;CheckFoundData=0x1,EidProfile=_0x1af1a6['id'],sDateRegister=_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x23b)],sessionStorage[_0x1d4fdc(0x237)](_0x1d4fdc(0x1f0),_0x1af1a6[_0x1d4fdc(0x21b)]()['empID']),sessionStorage['setItem'](_0x1d4fdc(0x238),_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x234)]),document[_0x1d4fdc(0x205)](_0x1d4fdc(0x1e6))[_0x1d4fdc(0x222)]=_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x233)],document[_0x1d4fdc(0x205)](_0x1d4fdc(0x208))[_0x1d4fdc(0x222)]=_0x1af1a6['data']()[_0x1d4fdc(0x234)],document[_0x1d4fdc(0x205)]('txtEmpPhone')[_0x1d4fdc(0x222)]=_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x1e8)],document[_0x1d4fdc(0x205)](_0x1d4fdc(0x200))['value']=_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x1fe)],_0x1af1a6[_0x1d4fdc(0x21b)]()[_0x1d4fdc(0x227)]==0x0?alert('wait'):CheckTNIapprove();}),CheckFoundData==0x0&&(document[_0x3f3913(0x205)](_0x3f3913(0x20f))[_0x3f3913(0x1ea)][_0x3f3913(0x235)]=_0x3f3913(0x214),document[_0x3f3913(0x205)](_0x3f3913(0x1f8))['style']['display']='block');});}var sTNIapprove=0x0;function CheckTNIapprove(){var _0x3695e1=_0x4265f4;dbTNIapprove[_0x3695e1(0x216)](_0x3695e1(0x1f0),'==',parseFloat(sessionStorage['getItem'](_0x3695e1(0x1f0))))['limit'](0x1)[_0x3695e1(0x230)]()['then'](_0x18fad0=>{var _0x28e083=_0x3695e1;_0x18fad0[_0x28e083(0x21a)](_0x2f81de=>{var _0x2155c6=_0x28e083;sTNIapprove=0x1,sessionStorage[_0x2155c6(0x237)](_0x2155c6(0x220),_0x2f81de[_0x2155c6(0x21b)]()[_0x2155c6(0x220)]),sessionStorage['setItem'](_0x2155c6(0x22c),0x1),CheckNewRedeemPoint();}),sTNIapprove==0x0&&WaitingPage();});}function _0x13bf(){var _0x168344=['1655966947-ZQna9Rop','getSeconds','TNImember','EmpGroup','<div\x20style=\x22height:\x2015px;\x22></div>','value','init','<div><img\x20src=\x22','170462SgvGFO','162549MOFvMq','statusconfirm','append','getDate','isLoggedIn','<div\x20style=\x22color:#002d63;\x20font-size:15px;\x20padding:10px;font-weight:\x20600;\x22>\x22\x20','EmpLevel','5960OPJrjj','1:653667385625:web:a5aed08500de80839f0588','getProfile','get','TotalPointRedeem','AIzaSyDfTJJ425U4OY0xac6jdhtSxDeuJ-OF-lE','empID','empName','display','DateUpload','setItem','EmpName','G-9SKTRHHSW9','lineID','DateRegister','TNIRedeemPoint','pictureUrl','TotalItemRedeem','CheckProfile','#DateUpload','querySelectorAll','txtEmpID','userId','empPhone','\x20Group\x20\x22</div>','style','html','<center><div><img\x20src=\x22./img/stop.png\x22\x20width=\x22250px;\x22></div>','getFullYear','317290UOHqoX','then','EmpID','txtEmpPhone','1588314HskSLz','LineName','firestore','div.com[min=\x22','New\x20User','</div>','myRegister','myTimer','LinePicture','\x22\x20class=\x22add-profile\x22></div>','retailproject-6f4fc','id02','empGroup','240271UCEqYu','txtEmpGroup','retailproject-6f4fc.firebaseapp.com','LineID','block','getMinutes','getElementById','8QmuctL','<div><div\x20class=\x22NameLine\x22>ยินดีต้อนรับสู่\x20TNI\x20Redeem\x20Point</div>','txtEmpName','</div></center>','653667385625','#MyWatingPage','1718094FWahKs','id01','limit','Loading','https://line.me','954eqqDNZ','#WelcomePage','getItem','none','retailproject-6f4fc.appspot.com','where','<div\x20style=\x22font-size:\x2011px;\x20color:#000000;\x22>Point\x20ของคุณมีค่า\x20สามารถนำมาเปลี่ยนเป็นของรางวัล<br>ได้ตามความต้องการของคุณ</div>','TNIdate','collection','forEach','data','<div\x20style=\x22margin-top:20px;\x22><br><div\x20class=\x22text-waiting\x22>เรียน\x20<font\x20color=\x22#0056ff\x22><b>คุณ'];_0x13bf=function(){return _0x168344;};return _0x13bf();}function CheckNewRedeemPoint(){var _0x1a1605=_0x4265f4;dbTNIRedeemPoint[_0x1a1605(0x216)]('EmpID','==',parseFloat(sessionStorage['getItem'](_0x1a1605(0x1f0))))[_0x1a1605(0x20e)](0x1)[_0x1a1605(0x230)]()[_0x1a1605(0x1ef)](_0x3f038e=>{var _0x460d70=_0x1a1605;_0x3f038e[_0x460d70(0x21a)](_0x17bd66=>{var _0x2aa9da=_0x460d70;sCheckTNIapprove=0x1,sessionStorage['setItem']('TotalPointRedeem',_0x17bd66[_0x2aa9da(0x21b)]()[_0x2aa9da(0x231)]),sessionStorage[_0x2aa9da(0x237)]('TotalItemRedeem',_0x17bd66[_0x2aa9da(0x21b)]()[_0x2aa9da(0x23e)]);});sCheckTNIapprove==0x0&&(dbTNIRedeemPoint['add']({'EmpID':parseFloat(sessionStorage['getItem'](_0x460d70(0x1f0))),'TotalPointRedeem':0x0,'TotalItemRedeem':0x0,'DateRedeem':''}),sessionStorage[_0x460d70(0x237)](_0x460d70(0x231),0x0),sessionStorage[_0x460d70(0x237)](_0x460d70(0x23e),0x0));var _0x46da29='';_0x46da29+=_0x460d70(0x207),_0x46da29+=_0x460d70(0x22b)+sessionStorage[_0x460d70(0x213)]('EmpGroup')+_0x460d70(0x1e9),_0x46da29+=_0x460d70(0x217),_0x46da29+='<div><img\x20src=\x22./img/giphy.gif\x22\x20style=\x22width:100%;\x22></div>',_0x46da29+='<di></div>',_0x46da29+='<div\x20class=\x22btn-t2\x22\x20onclick=\x22GotoLink()\x22\x20style=\x22margin-top:20px;padding:6px\x2040px;\x22>ดูข้อมูลของ<br>คุณ'+sessionStorage[_0x460d70(0x213)](_0x460d70(0x238))+_0x460d70(0x1f7),_0x46da29+=_0x460d70(0x221),_0x46da29+='',_0x46da29+='</div>',$(_0x460d70(0x212))[_0x460d70(0x1eb)](_0x46da29),document['getElementById'](_0x460d70(0x1fd))['style'][_0x460d70(0x235)]=_0x460d70(0x203);});}function WaitingPage(){var _0x2bfd21=_0x4265f4,_0x120bfa='';_0x120bfa+=_0x2bfd21(0x1ec),_0x120bfa+=_0x2bfd21(0x21c)+sessionStorage['getItem'](_0x2bfd21(0x238))+'</b></font>',_0x120bfa+='<br><b><font\x20color=\x22#ff0000\x22>คุณไม่ได้รับสิทธิ์ในการเข้าใช้งานเว็บไซต์นี้</font></b></div>',_0x120bfa+=_0x2bfd21(0x209),$(_0x2bfd21(0x20b))[_0x2bfd21(0x1eb)](_0x120bfa),document[_0x2bfd21(0x205)](_0x2bfd21(0x20f))[_0x2bfd21(0x1ea)][_0x2bfd21(0x235)]=_0x2bfd21(0x214),document['getElementById']('WaitingPage')[_0x2bfd21(0x1ea)][_0x2bfd21(0x235)]=_0x2bfd21(0x203);}function ClickSaveProfile(){var _0xc858b=_0x4265f4,_0x299f3f=0x0;stxtEmpID=document['getElementById'](_0xc858b(0x1e6))[_0xc858b(0x222)],stxtEmpName=document['getElementById'](_0xc858b(0x208))[_0xc858b(0x222)],stxtEmpPhone=document['getElementById'](_0xc858b(0x1f1))[_0xc858b(0x222)],stxtEmpGroup=document[_0xc858b(0x205)](_0xc858b(0x200))[_0xc858b(0x222)],stxtEmpID!==null&&stxtEmpID!==''&&(_0x299f3f=_0x299f3f+0x1),stxtEmpName!==null&&stxtEmpName!==''&&(_0x299f3f=_0x299f3f+0x1),stxtEmpPhone!==null&&stxtEmpPhone!==''&&(_0x299f3f=_0x299f3f+0x1),stxtEmpGroup!==null&&stxtEmpGroup!==''&&(_0x299f3f=_0x299f3f+0x1),_0x299f3f==0x4&&SaveData();}function SaveData(){var _0x3503ad=_0x4265f4;NewDate(),EidProfile==''&&(alert(_0x3503ad(0x1f6)),dbProfile['add']({'lineID':sessionStorage['getItem'](_0x3503ad(0x202)),'lineName':sessionStorage['getItem'](_0x3503ad(0x1f3)),'linePicture':sessionStorage['getItem']('LinePicture'),'empID':document[_0x3503ad(0x205)](_0x3503ad(0x1e6))[_0x3503ad(0x222)],'empName':document[_0x3503ad(0x205)](_0x3503ad(0x208))[_0x3503ad(0x222)],'empPhone':document[_0x3503ad(0x205)]('txtEmpPhone')[_0x3503ad(0x222)],'empGroup':document[_0x3503ad(0x205)]('txtEmpGroup')[_0x3503ad(0x222)],'empRH':document['getElementById'](_0x3503ad(0x200))['value'],'statusconfirm':0x0,'statusedit':0x1,'statuspass':0x0,'empAddress':'','lastcheckin':'','memo':'','empBr':'','DateRegister':dateString,'RegisterDate':dateString})),CheckData(),document[_0x3503ad(0x205)]('myRegister')[_0x3503ad(0x1ea)][_0x3503ad(0x235)]=_0x3503ad(0x214),document[_0x3503ad(0x205)](_0x3503ad(0x1f9))[_0x3503ad(0x1ea)]['display']=_0x3503ad(0x203);}function _0x5a70(_0x400c4e,_0x3a9c38){var _0x13bfdf=_0x13bf();return _0x5a70=function(_0x5a7010,_0x22526d){_0x5a7010=_0x5a7010-0x1e3;var _0x401625=_0x13bfdf[_0x5a7010];return _0x401625;},_0x5a70(_0x400c4e,_0x3a9c38);}function GotoLink(){location['href']='home.html';}function NewDate(){var _0x204635=_0x4265f4,_0xd6997a=new Date(),_0x51d980=_0xd6997a[_0x204635(0x229)]()+'',_0x39aea9=_0xd6997a['getMonth']()+0x1+'',_0x2a294b=_0xd6997a[_0x204635(0x1ed)]()+'',_0x34373e=_0xd6997a['getHours']()+'',_0x3ea4b5=_0xd6997a[_0x204635(0x204)]()+'',_0x119d5e=_0xd6997a[_0x204635(0x21e)]()+'',_0x52222d=_0x34373e>=0xc?'PM':'AM';_0x51d980=checkZero(_0x51d980),_0x39aea9=checkZero(_0x39aea9),_0x2a294b=checkZero(_0x2a294b),_0x34373e=checkZero(_0x34373e),_0x3ea4b5=checkZero(_0x3ea4b5),_0x119d5e=checkZero(_0x119d5e),dateString=_0x51d980+'/'+_0x39aea9+'/'+_0x2a294b+'\x20'+_0x34373e+':'+_0x3ea4b5+':'+_0x119d5e+'\x20'+_0x52222d;}function checkZero(_0x163c30){return _0x163c30['length']==0x1&&(_0x163c30='0'+_0x163c30),_0x163c30;}function CloseAll(){var _0x164ab7=_0x4265f4;document[_0x164ab7(0x205)](_0x164ab7(0x20d))[_0x164ab7(0x1ea)]['display']='none',document['getElementById']('id02')[_0x164ab7(0x1ea)][_0x164ab7(0x235)]=_0x164ab7(0x214);}
